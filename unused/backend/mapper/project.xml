<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.ProjectDao">

	<!-- 프로젝트 생성 -->
	<insert id="insert" parameterType="project" useGeneratedKeys="false">
		<selectKey keyProperty="projectId" resultType="int" order="BEFORE">
			SELECT nextval('flowtask_project_seq')
		</selectKey>
		INSERT INTO flowtask_project (project_id, team_id, project_name, created_at)
		VALUES (#{projectId}, #{teamId}, #{projectName}, CURRENT_TIMESTAMP)
	</insert>

	<!-- 팀별 프로젝트 목록 -->
	<select id="listByTeam" parameterType="int" resultType="project">
		SELECT project_id, team_id, project_name, created_at
		FROM flowtask_project
		WHERE team_id = #{teamId}
		ORDER BY created_at ASC
	</select>

	<!-- 프로젝트 상세 -->
	<select id="content" parameterType="int" resultType="project">
		SELECT project_id, team_id, project_name, created_at
		FROM flowtask_project
		WHERE project_id = #{projectId}
	</select>

	<!-- 프로젝트 수정 -->
	<update id="update" parameterType="project">
		UPDATE flowtask_project
		SET project_name = #{projectName}
		WHERE project_id = #{projectId}
	</update>

	<!-- 프로젝트 삭제 -->
	<delete id="delete" parameterType="int">
		DELETE FROM flowtask_project WHERE project_id = #{projectId}
	</delete>

</mapper>
